<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
	<meta charset="utf-8" />
    <link href="../Styles/main.css" rel="stylesheet" />
    <style>
        article {
            width:70%;
        }
        #d1 {
            border-bottom:1px solid gray;
            margin:20px;
            font-size:20px;
            padding-left:15px;
            
        }
        #d2 {
            text-align:center;
            
        }
        div p {
            font-size:14px;
            color:silver;
        }
        fieldset {
            border-radius:15px;
        }

        span {
            font-size:16px;
            color:red;
        }
    </style>
    <script>
        

        window.onload = function () {
            document.getElementById("account").addEventListener("blur", checkName);
            document.getElementById("account").addEventListener("focus", removeName);
            document.getElementById("pwd").addEventListener("blur", checkPwd);
            document.getElementById("pwd").addEventListener("focus", removePwd);
            document.getElementById("birth").addEventListener("blur", checkBirth);
            document.getElementById("birth").addEventListener("focus", removeBirth);
            document.getElementById("submi").addEventListener("click", checkAll);
            document.getElementById("clear").addEventListener("click", removeAll);
        }

        function checkName() {
            var name = document.getElementById("account").value;
            var re = /[\u4e00-\u9fa5]/;
            if (name == "") {
                document.getElementById("sp1").innerHTML = "<img src='../images/error.png' />姓名不得空白";
            } else if (name.length < 2) {
                document.getElementById("sp1").innerHTML = "<img src='../images/error.png' />姓名不得少於兩個字";
            } else if (name.length >= 2) {
                for (var i in name) {
                    if (re.test(name.charAt(i))) {
                        document.getElementById("sp1").innerHTML = "<img src='../images/ok.png' />正確";
                    } else document.getElementById("sp1").innerHTML = "<img src='../images/error.png' />姓名只可為中文";
                }
            }
        }
        function removeName() {
            document.getElementById("sp1").innerHTML = "";
        }

        function checkPwd() {
            var pass = document.getElementById("pwd").value;
            var re = /^(?=.*\d)(?=.*[a-zA-Z])(?=.*\W).{6,30}$/;
             
            if (pass == "") {
                document.getElementById('sp2').innerHTML = "<img src='../images/error.png' />密碼不得空白";
            } else if (re.test(pass)) {
                document.getElementById('sp2').innerHTML = '<img src="../images/ok.png" />正確';
            } else document.getElementById('sp2').innerHTML = "<img src='../images/error.png' />密碼不符合格式";
        }
        function removePwd() {
            document.getElementById('sp2').innerHTML = "";
        }

        function checkBirth() {
            var date = document.getElementById("birth").value;
            var dateArray = date.split("/");
            var year = dateArray[0]; month = dateArray[1]; day = dateArray[2];
            var ch = new Date(new Date(date).valueOf());

            if (date == "") {
                document.getElementById("sp3").innerHTML = "<img src='../images/error.png' />日期不得空白";
            } else if (ch.getFullYear() == year && (ch.getMonth() + 1) == month && ch.getDate() == day) {
                document.getElementById("sp3").innerHTML = '<img src="../images/ok.png" />正確';
            } else document.getElementById("sp3").innerHTML = '<img src="../images/error.png" />日期不符合格式';
        }
        function removeBirth() {
            document.getElementById("sp3").innerHTML = "";
        }

        function checkAll() {
            var sp1 = document.getElementById("sp1").innerHTML;
            var sp2 = document.getElementById("sp2").innerHTML;
            var sp3 = document.getElementById("sp3").innerHTML;

            if (sp1 == '<img src="../images/ok.png">正確' && sp2 == '<img src="../images/ok.png">正確' && sp3 == '<img src="../images/ok.png">正確') {
                document.getElementById("send").submit();
            } else alert("請確實填寫資料");
        }
        function removeAll() {
            removeName();
            removePwd();
            removeBirth();
        }

    </script>

</head>
<body>
    <div id="container">
        <header>
            <nav>
                <ul class="menu">
                    <li><a href="../index.html">首頁</a></li>
                    <li><a href="../Lab01/Lab01.html">單元一</a></li>
                    <li><a href="Lab02.html">單元二</a></li>
                    <li><a href="../Lab03/Lab03.html">單元三</a></li>
                    <li><a href="../Lab04/Lab04.html">單元四</a></li>
                    <li><a href="../Lab05/Lab05.html">單元五</a></li>
                    
                </ul>
            </nav>
        </header>
        <div id="split"></div>
        <div id="content">           
            
            <article>
                <form action="../index.html" id="send" method="get" >
                    <fieldset>
                        <legend>Form Check</legend>
                        <div id="d1">
                            姓名:<input type="text" name="account" id="account" placeholder="請輸入中文姓名" autocomplete="off" />
                            <span id="sp1"></span>
                            <p>(1.不可空白，2.至少兩個字以上，3.必須全部為中文字)</p>
                        </div>
                        <div id="d1">
                            密碼:<input type="password" name="pwd" id="pwd" placeholder="請輸入密碼"/>
                            <span id="sp2"></span>
                            <p>(1.不可空白，2.至少6個字且必須包含英文字母、數字、特殊字元[!@#$%^&*])</p>
                        </div>
                        <div id="d1">
                            生日:<input type="text" name="birth" id="birth" placeholder="ex:2000/2/29" autocomplete="off" />
                            <span id="sp3"></span>
                            <p>格式:西元年/月/日 yyyy/MM/dd</p>
                        </div>
                        <div id="d2">
                            <input type="button" id="submi" value="送出" />
                            <input type="reset" id="clear" value="清除" />
                        </div>
                    </fieldset>
                </form>
            </article>             
        </div>
    </div>
</body>
</html>
